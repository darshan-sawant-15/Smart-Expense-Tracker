<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{base::baseFrag(~{::title},~{::section})}">

<head>
	<meta charset="ISO-8859-1">
	<title>Register</title>
</head>

<body>
	<section>
		<div class="container">
			<div class="row py-3">
				<div class="col-md-8 offset-md-2">
					<div class="card p-3">
						<form th:action="@{/do-register}" method="post" th:object="${user}"
							onsubmit="return validate()">
							<h4 class="text-center"> Register Yourself <i class="fa-solid fa-user-plus"></i></h4>

							<div class="alert text-center" th:if="${message}" th:text="${message.content}"
								th:classappend="${message.type}">
							</div>

							<div class="form-group">
								<label for="name">Name</label>
								<input type="text" class="form-control" id="name" name="name"
									placeholder="Enter Your Name" required th:value="${user.name}" minlength="2"
									maxlength="30" th:classappend="${#fields.hasErrors('name')?'is-invalid':''}">
								<div th:each="e: ${#fields.errors('name')}" th:text="${e}" class="invalid-feedback">

								</div>
							</div>
							<div class="form-group">
								<label for="age">Age</label>
								<input type="number" class="form-control" id="age" name="age"
									placeholder="Enter Your Age" onKeyPress="if(this.value.length==2) return false;"
									required th:value="${user.age}"
									th:classappend="${#fields.hasErrors('age')?'is-invalid':''}">
								<div th:each="e: ${#fields.errors('age')}" th:text="${e}" class="invalid-feedback">

								</div>
							</div>
							<div class="form-group">
								<label for="name">Email</label>
								<input type="email" class="form-control" id="email" name="email"
									placeholder="Enter Your Email" required th:value="${user.email}"
									th:classappend="${#fields.hasErrors('email')?'is-invalid':''}">
								<div th:each="e: ${#fields.errors('email')}" th:text="${e}" class="invalid-feedback">
								</div>
							</div>
							<div class="form-group">
								<label for="phone">Phone No.</label>
								<input type="number" class="form-control" id="phone" name="phone"
									placeholder="Enter Your Phone Number"
									pattern="^(?:(?:\+|0{0,2})91(\s*[\-]\s*)?|[0]?)?[789]\d{9}$"
									title="Valid 10 digit Indian phone number" required
									onKeyPress="if(this.value.length==10) return false;" th:value="${user.phone}"
									th:classappend="${#fields.hasErrors('phone')?'is-invalid':''}">
								<div th:each="e: ${#fields.errors('phone')}" th:text="${e}" class="invalid-feedback">
								</div>
							</div>

							<div class="form-group">
								<label for="goals">Write A Few Words About Your Savings Goal</label>
								<textarea class="form-control" rows="10" placeholder="Set Some Saving Goals" required
									id="goals" name="goals" th:text="${user.goals}" maxlength="500"
									th:classappend="${#fields.hasErrors('goals')?'is-invalid':''}"></textarea>
								<div th:each="e: ${#fields.errors('goals')}" th:text="${e}" class="invalid-feedback">
								</div>

							</div>

							<div class="form-group">
								<label for="password">Password</label> <input type="password" class="form-control"
									id="password" name="password" required
									pattern="^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$ %^&*-]).{8,}$"
									title="Minimum eight characters, at least one upper case English letter, one lower case English letter, one number and one special character"
									minlength="8" maxlength="256" placeholder="Enter A Password"
									th:classappend="${#fields.hasErrors('password')?'is-invalid':''}">
								<div th:each="e: ${#fields.errors('password')}" th:text="${e}" class="invalid-feedback">
								</div>
							</div>
							<div class="form-group">
								<label for="cpassword">Confirm Password</label> <input required type="password"
									class="form-control" id="cpassword" name="cpassword"
									placeholder="Re-enter Password">
							</div>

							<div class="form-group text-center">
								<div class="form-check">
									<input type="checkbox" id="terms" name="terms" class="form-check-input"
										aria-label="Checkbox for following text input"
										th:class="${termsError} ? 'form-check-input is-invalid' : 'form-check-input'">
									<label for="terms" class="form-check-label">I agree with all the terms and
										conditions</label>
								</div>
							</div>

							<div class="form-group text-center">
								<button type="submit" class="btn btn-md btn-custom">Submit</button>
								<button type="reset" class="btn btn-md btn-custom-sec">Reset</button>
							</div>
							<div class="form-group text-center">
								<p>
									Have an account? <a th:href="@{/login}">Login</a>
								</p>
							</div>

						</form>
					</div>
				</div>
			</div>
		</div>
		<script th:src="@{/js/register.js}"></script>
	</section>
</body>

</html>